---
title: "GEDI Presentation"
author: "Sam Watson, Amanda Payton, Wenqu Chen"
date: "May 4, 2020"
output: slidy_presentation
editor_options: 
  chunk_output_type: console
  



---

```{r setup, include=FALSE}
# #load libraries
library(rGEDI)
library(sf)
library(sp)
library(leaflet)
library(rasterVis)
library(viridis)
library(dplyr)
#library(gediamazonia)
library(rgdal)
library(ggplot2)
library(here)


#bounding box coordinates
ul_lat <- -7.999644
lr_lat <- -9.437084
ul_lon <- -74.099156
lr_lon <- -76.157869

#Data Range
daterange=c("2019-08-01", "2019-08-15")
#Get path to GEDI


#set output directories
outdir = (paste0(getwd(), "/data"))
outdir1 = (paste0(getwd(), "/data/level1B"))
outdir2 = (paste0(getwd(), "/data/level2A"))
outdir3 = (paste0(getwd(), "/data/level2B"))

#Download GEDI levels
# gediDownload(filepath = gLevel1B, outdir = outdir1)
# gediDownload(filepath = gLevel2A, outdir = outdir2)
# gediDownload(filepath = gLevel2B, outdir = outdir3)


```


## Project Goals

The goals of this project are:

- Develop R code to download GEDI data for the study area 
- Determine the relationship between the study area zones and GEDI metrics
- Determine the relationship between the distance from roads and GEDI metrics


## Study Area

```{r, echo=FALSE, out.width='50%', out.height = "50%", fig.align='center'}
knitr::include_graphics(here::here("external/presentation/study_area.png"))
```

## Introduction to GEDI

- full waveform LiDAR instrument launched December 5th, 2018
- highest resolution and densest sampling of any lidar ever put into orbit
- four types of vegetation structure information can be extracted: 
    - surface topography
    - canopy height metrics
    - canopy cover metrics
    - vertical structure metrics

```{r, echo=FALSE, out.width = "40%", out.height = "40%", fig.pos="h", fig.align = "center"}
knitr::include_graphics(here::here("external/presentation/gedi_logo.jpg"))
```

```{r, out.width = "20%", out.height = "20%", fig.align = "center"}
gLevel1B <- gedifinder(product = "GEDI01_B", ul_lat, ul_lon,
                       lr_lat, lr_lon, version = "001", daterange = daterange)
gLevel2A <- gedifinder(product = "GEDI02_A", ul_lat, ul_lon, 
                       lr_lat, lr_lon, version = "001", daterange = daterange)
gLevel2B <- gedifinder(product = "GEDI02_B", ul_lat, ul_lon, 
                       lr_lat, lr_lon, version = "001", daterange = daterange)
```

## GEDI Metrics

- Plant Area Index

- Relative Height

```{r, echo=FALSE, out.width='50%', out.height = "50%", fig.align='center'}
knitr::include_graphics(here::here("external/presentation/rh_explanation.png"))
```
(Image courtesty of https://gedi.umd.edu/data/products/)


## Relative Height Metrics and Distance from Roads

```{r, echo=FALSE, out.width='50%', out.height = "40%",fig.align='center'}
knitr::include_graphics(here::here("external/presentation/roads_rhplot.png"))
```


## Relative Height Grid Values Across Study Area Zones

```{r image_grobs, fig.show = "hold", out.width = "50%", out.height = "40%", fig.align = "default", echo=FALSE}

knitr::include_graphics(here::here("external/presentation/rhplot.png"))

knitr::include_graphics(here::here("external/presentation/rh_points.png"))

```

## Mean Plant Area Index Grid Values Across Study Area Zones
```{r image_grobs1, fig.show = "hold", out.width = "50%", out.height = "40%", fig.align = "default", echo=FALSE}

knitr::include_graphics(here::here("external/presentation/pai_zones.png"))

knitr::include_graphics(here::here("external/presentation/pai_points.png"))

```

## In Conclusion

Study Area Metrics:

  - As distances from roads increases, the mean relative height for each canopy level decreases
  - The National Park has the highest number of returns for all canopy height levels
  - The Plant Area Index has similar meaans across all study area zones

Code Used/ Developed:

  - Download GEDI data for specific dates/ regions
  - Convert data into shapefiles
  - Clip and Intersect data to shapefiles and bounding boxes
  - Created Data frames from shapefiles
  - Summarize metric statistics in boxplots
  - Create maps of GEDI data




