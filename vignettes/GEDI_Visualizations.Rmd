---
title: "Visualizing GEDI Data"
author: "Amanda Payton, Sam Watson, Wenqu Chen"
date: "May 2, 2020"
output: html_document
vignette: >
  %\VignetteIndexEntry{Visualizing GEDI Data}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

# Overview

### This vignette uses the clipped shapefiles from the GEDI data vignette and 
### visualizes the data through maps and box plots.

# Setup

## Package Installation and library loading

```{r}
#install.packages("rGEDI")
library(rGEDI)
#install.packages("geospaar")
library(geospaar)
library(ggplot2)
```

## Set Folder paths

```{r}
#check working directory
getwd() 
#If needed, set your working directory to the gediamazonia project folder

data_fold = paste0(getwd(), "/data")
working_fold = paste0(getwd(), "/working")
```

## Read in GEDI Shapefiles and Study Area Data

```{r}
data("studyarea")
data("roads")

level1b <- st_read(dsn = paste0(data_fold, "/aoi_GEDI_1B.shp"))
head(level1b)

level2a <- st_read(dsn = paste0(data_fold, "/aoi_GEDI_2A.shp"))
head(level2a)

level2b <- st_read(dsn = paste0(data_fold, "/aoi_GEDI_2B.shp"))
head(level2b)

level2bPAI <- st_read(dsn = paste0(data_fold, "/aoi_GEDI_2B_PAI.shp"))
head(level2bPAI)

level2bPAVD <- st_read(dsn = "/aoi_GEDI_2B_PAVD.shp"))
head(level2bPAVD)
```

# Visualizations

## Map Study Area

```{r}
#legtext <- c("National Park", "Park Buffer", "Cacao Zone")
#legfill <- c("dark green", "grey90", "tan")

#Create map of Study Area
p <- ggplot() + geom_sf(data = studyarea$np, fill = "dark green") + 
  geom_sf(data = studyarea$buffer, color = "grey", fill = "light blue") + 
  geom_sf(data = studyarea$cacao_zone, color = "brown", 
          fill = alpha("tan", .2)) +   
  geom_sf(data = roads, color = "black") +
  theme_minimal() +
  ggtitle("Study Region: Cordillera Azul \n National Park") + 
     theme(plot.title = element_text(face = "bold"))
  
#Export to Working Folder
ggsave(p, filename = paste0(working_fold, "/study_area.png"), height = 4,
       width = 5, dpi = 300)
```

## Map Variables

```{r}
ggplot() + geom_sf(data = studyarea$np, color = "grey", fill = "grey70") + 
  geom_sf(data = studyarea$buffer, color = "grey", fill = "grey80") + 
  geom_sf(data = studyarea$cacao_zone, color = "grey", fill = "grey90") +   
  geom_sf(data = roads, color = "grey") +
  theme_minimal() +
  #geom_sf(data = level1b, aes(color = elvtn_0)) #level 1B Elevation data
  #geom_sf(data = level2a, aes(color = rh25)) #level 2A relative height 25
  #geom_sf(data = level2a, aes(color = rh50)) #level 2A relative height 50
  #geom_sf(data = level2a, aes(color = rh75)) #level 2A relative height 75
  #geom_sf(data = level2a, aes(color = rh100)) #level 2A relative height 100
  geom_sf(data = level2b, aes(color = pai)) #level 2B plant area index

```

## Create Boxplots - Relative Height and Zones

```{r}

```

## Create Boxplots - Plant Area Index and Zones

```{r}

```

## Create Boxplots - Relative Height and Road Distance

```{r}

```













## 